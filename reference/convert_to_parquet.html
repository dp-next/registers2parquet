<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert register SAS file(s) and save to Parquet format — convert_to_parquet • registers2parquet</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert register SAS file(s) and save to Parquet format — convert_to_parquet"><meta name="description" content='This function reads one or more SAS files for a given register, removes any
duplicate rows, and saves the data in Parquet format. It expects the input
SAS files to come from the same register, e.g., different years of the same
register.
If multiple paths are given, the function looks for a year (4 digits) in the
file names to use the year as partition, see vignettes("design") for more
information about the partitioning. If a year is found, the data is saved
partitioned by year in the output directory, e.g.,
path/to/register_name/year=2020/part-0.parquet.
If no year can be found or only one path is given, the data is converted
without partitioning and saved as a Parquet file with the name specified in
the output path. E.g., if output_path is path/to/register, the Parquet file
will be saved as path/to/register.parquet.
If any duplicate rows are found, they are deduplicated before saving to
Parquet. If duplicate rows are found in multiple source files, the row from
the file that appears first in path is kept. Rows that are almost identical
across different files (e.g. different years) but that have a difference in
values are kept, as determining which is the correct value requires domain
knowledge.'><meta property="og:description" content='This function reads one or more SAS files for a given register, removes any
duplicate rows, and saves the data in Parquet format. It expects the input
SAS files to come from the same register, e.g., different years of the same
register.
If multiple paths are given, the function looks for a year (4 digits) in the
file names to use the year as partition, see vignettes("design") for more
information about the partitioning. If a year is found, the data is saved
partitioned by year in the output directory, e.g.,
path/to/register_name/year=2020/part-0.parquet.
If no year can be found or only one path is given, the data is converted
without partitioning and saved as a Parquet file with the name specified in
the output path. E.g., if output_path is path/to/register, the Parquet file
will be saved as path/to/register.parquet.
If any duplicate rows are found, they are deduplicated before saving to
Parquet. If duplicate rows are found in multiple source files, the row from
the file that appears first in path is kept. Rows that are almost identical
across different files (e.g. different years) but that have a difference in
values are kept, as determining which is the correct value requires domain
knowledge.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">registers2parquet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/design.html">Design</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dp-next/registers2parquet/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert register SAS file(s) and save to Parquet format</h1>
      <small class="dont-index">Source: <a href="https://github.com/dp-next/registers2parquet/blob/main/R/convert.R" class="external-link"><code>R/convert.R</code></a></small>
      <div class="d-none name"><code>convert_to_parquet.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function reads one or more SAS files for a given register, removes any
duplicate rows, and saves the data in Parquet format. It expects the input
SAS files to come from the same register, e.g., different years of the same
register.</p>
<p>If multiple paths are given, the function looks for a year (4 digits) in the
file names to use the year as partition, see <code>vignettes("design")</code> for more
information about the partitioning. If a year is found, the data is saved
partitioned by year in the output directory, e.g.,
<code>path/to/register_name/year=2020/part-0.parquet</code>.</p>
<p>If no year can be found or only one path is given, the data is converted
without partitioning and saved as a Parquet file with the name specified in
the output path. E.g., if output_path is <code>path/to/register</code>, the Parquet file
will be saved as <code>path/to/register.parquet</code>.</p>
<p>If any duplicate rows are found, they are deduplicated before saving to
Parquet. If duplicate rows are found in multiple source files, the row from
the file that appears first in <code>path</code> is kept. Rows that are almost identical
across different files (e.g. different years) but that have a difference in
values are kept, as determining which is the correct value requires domain
knowledge.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">convert_to_parquet</span><span class="op">(</span><span class="va">path</span>, <span class="va">output_path</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>A character vector with the absolute path to the register SAS
file(s).</p></dd>


<dt id="arg-output-path">output_path<a class="anchor" aria-label="anchor" href="#arg-output-path"></a></dt>
<dd><p>A character scalar with the path to the directory to save
the output Parquet file to. Should include the register name as the last
part of the path. E.g., <code>path/to/register_name/</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a character scalar with the path to the created Parquet
file(s) (<code>output_path</code>), so it can be used in a
<a href="https://books.ropensci.org/targets/" class="external-link">targets</a> pipeline.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">convert_to_parquet</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="list_sas_files.html">list_sas_files</a></span><span class="op">(</span><span class="st">"path/to/sas/files"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"output/path/to/register_name"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Luke Johnston, Signe Kirk Brødbæk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

